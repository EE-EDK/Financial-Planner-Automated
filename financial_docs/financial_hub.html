<!DOCTYPE html>
<html lang="en">
<!--
    Personal Financial Hub - Auto-Generated Financial Document Viewer
    Generated by build_financial_docs.py

    Features:
    - Auto-discovered from Archive/ directory
    - Categorized by document type
    - Embedded markdown content
    - Links to PDF/Excel/CSV files
    - Image viewer
-->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Financial Hub</title>
    <script src="https://cdn.jsdelivr.net/npm/marked@9.1.6/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #0097A7;
            --primary-light: #00BCD4;
            --secondary-color: #1976D2;
            --accent-color: #F57C00;
            --danger-color: #D32F2F;
            --dark-bg: #1a1d23;
            --card-bg: #2d3340;
            --text-primary: #ffffff;
            --text-secondary: #B0BEC5;
            --border-color: rgba(0, 188, 212, 0.3);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--dark-bg) 0%, var(--card-bg) 100%);
            color: var(--text-primary);
            overflow-x: hidden;
            min-height: 100vh;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            padding: 50px 20px;
            background: rgba(0, 188, 212, 0.1);
            border-radius: 15px;
            margin-bottom: 40px;
            border: 2px solid var(--primary-color);
        }

        .search-container {
            max-width: 600px;
            margin: 30px auto 0;
            position: relative;
        }

        .search-box {
            width: 100%;
            padding: 15px 50px 15px 20px;
            font-size: 1em;
            border: 2px solid var(--primary-color);
            border-radius: 25px;
            background: rgba(45, 51, 64, 0.9);
            color: var(--text-primary);
            outline: none;
            transition: all 0.3s;
        }

        .search-box:focus {
            border-color: var(--primary-light);
            box-shadow: 0 0 20px rgba(0, 188, 212, 0.3);
        }

        .search-icon {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2em;
            color: var(--text-secondary);
        }

        .search-results {
            margin-top: 20px;
            padding: 15px;
            background: rgba(0, 188, 212, 0.1);
            border-radius: 10px;
            display: none;
        }

        .search-results.visible {
            display: block;
        }

        .charts-section {
            background: rgba(45, 51, 64, 0.9);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 40px;
            border: 2px solid var(--primary-color);
        }

        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin-top: 20px;
        }

        .chart-container {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
            min-height: 300px;
        }

        .chart-title {
            color: var(--primary-light);
            font-size: 1.3em;
            margin-bottom: 15px;
            text-align: center;
        }

        /* Dashboard Cards */
        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .dashboard-card {
            background: linear-gradient(135deg, rgba(0, 188, 212, 0.2), rgba(0, 188, 212, 0.05));
            border: 2px solid var(--primary-color);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }

        .dashboard-card-title {
            color: var(--text-secondary);
            font-size: 0.9em;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .dashboard-card-value {
            color: var(--primary-light);
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .dashboard-card-subtitle {
            color: var(--text-secondary);
            font-size: 0.85em;
        }

        /* Alerts Banner */
        .alerts-banner {
            background: rgba(211, 47, 47, 0.1);
            border: 2px solid #D32F2F;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .alert-item {
            padding: 12px;
            margin: 8px 0;
            background: rgba(0, 0, 0, 0.3);
            border-left: 4px solid #D32F2F;
            border-radius: 6px;
        }

        .alert-item.warning {
            border-left-color: #F57C00;
        }

        .alert-item.critical {
            border-left-color: #D32F2F;
        }

        .alert-message {
            color: var(--text-light);
            font-weight: bold;
            margin-bottom: 5px;
        }

        .alert-action {
            color: var(--text-secondary);
            font-size: 0.9em;
        }

        /* Budget Progress Bars */
        .budget-section {
            background: rgba(45, 51, 64, 0.9);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 40px;
            border: 2px solid var(--primary-color);
        }

        .budget-item {
            margin-bottom: 20px;
        }

        .budget-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            color: var(--text-light);
        }

        .budget-category {
            font-weight: bold;
        }

        .budget-amounts {
            font-size: 0.9em;
            color: var(--text-secondary);
        }

        .budget-progress-bar {
            height: 24px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            overflow: hidden;
            position: relative;
        }

        .budget-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--primary-light));
            border-radius: 12px;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.85em;
            font-weight: bold;
        }

        .budget-progress-fill.over-budget {
            background: linear-gradient(90deg, #D32F2F, #FF5252);
        }

        h1 {
            font-size: 3em;
            color: var(--primary-light);
            margin-bottom: 15px;
            text-shadow: 0 0 20px rgba(0, 188, 212, 0.5);
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1.2em;
        }

        .docs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .doc-card {
            background: linear-gradient(135deg, rgba(45, 51, 64, 0.9), rgba(30, 35, 45, 0.9));
            border-radius: 15px;
            padding: 25px;
            border: 2px solid transparent;
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
        }

        .doc-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary-color);
            box-shadow: 0 10px 30px rgba(0, 188, 212, 0.3);
        }

        .doc-header {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            align-items: center;
        }

        .doc-icon {
            font-size: 2em;
        }

        .doc-title {
            font-size: 1.2em;
            color: var(--primary-light);
            margin-bottom: 8px;
            font-weight: 600;
        }

        .doc-category-badge {
            display: inline-block;
            padding: 4px 12px;
            background: rgba(0, 188, 212, 0.2);
            border: 1px solid var(--primary-color);
            border-radius: 12px;
            font-size: 0.8em;
            color: var(--primary-light);
            margin-top: 10px;
        }

        .badge {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 10px;
            font-size: 0.75em;
            font-weight: bold;
            margin-left: 10px;
        }

        .badge-important {
            background: #D32F2F;
            color: white;
        }

        .badge-tax {
            background: #1976D2;
            color: white;
        }

        .badge-analysis {
            background: #F57C00;
            color: white;
        }

        .category-section {
            margin-bottom: 50px;
        }

        .category-header {
            font-size: 1.8em;
            color: var(--primary-light);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid var(--primary-color);
        }

        .category-description {
            color: var(--text-secondary);
            margin-bottom: 20px;
            font-size: 1.1em;
        }

        /* Panel styles */
        .panel-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 100;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }

        .panel-overlay.visible {
            opacity: 1;
            visibility: visible;
        }

        .sliding-panel {
            position: fixed;
            top: 0;
            right: -60%;
            width: 60%;
            height: 100%;
            background: var(--dark-bg);
            z-index: 101;
            transition: right 0.4s;
            box-shadow: -5px 0 30px rgba(0, 0, 0, 0.5);
            display: flex;
            flex-direction: column;
        }

        .sliding-panel.visible {
            right: 0;
        }

        .panel-header {
            padding: 25px;
            background: rgba(0, 188, 212, 0.1);
            border-bottom: 2px solid var(--primary-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .panel-title {
            font-size: 1.5em;
            color: var(--primary-light);
            font-weight: 600;
        }

        .close-btn {
            padding: 10px 20px;
            background: var(--danger-color);
            border: none;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
        }

        .close-btn:hover {
            background: #B71C1C;
        }

        .panel-content {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
        }

        /* Markdown content styles */
        .markdown-content {
            line-height: 1.6;
        }

        .markdown-content h1 {
            color: var(--primary-light);
            border-bottom: 3px solid var(--primary-color);
            padding-bottom: 10px;
            margin: 30px 0 20px 0;
        }

        .markdown-content h2 {
            color: var(--primary-color);
            margin: 25px 0 15px 0;
            border-left: 4px solid var(--primary-color);
            padding-left: 12px;
        }

        .markdown-content h3 {
            color: var(--primary-light);
            margin: 20px 0 10px 0;
        }

        .markdown-content table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: rgba(0, 0, 0, 0.3);
        }

        .markdown-content th {
            background: rgba(0, 188, 212, 0.2);
            color: var(--primary-light);
            padding: 12px;
            text-align: left;
            font-weight: bold;
        }

        .markdown-content td {
            padding: 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .markdown-content code {
            background: rgba(0, 188, 212, 0.15);
            padding: 3px 8px;
            border-radius: 4px;
            color: var(--primary-light);
        }

        .markdown-content pre {
            background: rgba(0, 0, 0, 0.5);
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            border-left: 4px solid var(--primary-color);
        }

        .file-link {
            display: inline-block;
            padding: 15px 25px;
            background: var(--secondary-color);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            margin: 10px 0;
            font-weight: 600;
        }

        .file-link:hover {
            background: #1565C0;
        }

        @media (max-width: 1024px) {
            .sliding-panel {
                width: 80%;
                right: -80%;
            }

            .charts-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2em;
            }

            .subtitle {
                font-size: 1em;
            }

            header {
                padding: 30px 15px;
            }

            .container {
                padding: 10px;
            }

            .docs-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .doc-card {
                padding: 20px;
            }

            .sliding-panel {
                width: 100%;
                right: -100%;
            }

            .panel-content {
                padding: 20px;
            }

            .charts-section {
                padding: 20px;
            }

            .charts-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .chart-container {
                min-height: 250px;
            }

            .search-box {
                font-size: 0.9em;
                padding: 12px 45px 12px 15px;
            }

            .category-header {
                font-size: 1.5em;
            }
        }

        /* Touch-friendly enhancements */
        @media (hover: none) and (pointer: coarse) {
            .doc-card {
                -webkit-tap-highlight-color: rgba(0, 188, 212, 0.2);
            }

            .close-btn, .file-link {
                min-height: 44px;
                min-width: 44px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üí∞ Personal Financial Hub</h1>
            <p class="subtitle">Consolidated Financial Documents & Analysis</p>
            <p class="subtitle" style="font-size: 0.9em; margin-top: 10px;">Last Updated: November 22, 2025</p>

            <div class="search-container">
                <input type="text"
                       id="searchBox"
                       class="search-box"
                       placeholder="Search financial documents..."
                       oninput="performSearch(this.value)">
                <span class="search-icon">üîç</span>
                <div id="searchResults" class="search-results"></div>
            </div>
        </header>

        <!-- Alerts Banner -->
        <div id="alertsContainer" style="display: none;">
            <!-- Alerts populated by JavaScript -->
        </div>

        <!-- Dashboard Cards -->
        <div class="dashboard-cards" id="dashboardCards">
            <div class="dashboard-card">
                <div class="dashboard-card-title">üí∞ Liquid Cash</div>
                <div class="dashboard-card-value" id="liquidCashValue">--</div>
                <div class="dashboard-card-subtitle">Available cash</div>
            </div>
            <div class="dashboard-card">
                <div class="dashboard-card-title">üìâ Total Debt</div>
                <div class="dashboard-card-value" id="totalDebtValue">--</div>
                <div class="dashboard-card-subtitle">All debt balances</div>
            </div>
            <div class="dashboard-card">
                <div class="dashboard-card-title">üìä Net Worth</div>
                <div class="dashboard-card-value" id="netWorthValue">--</div>
                <div class="dashboard-card-subtitle">Cash - Debt</div>
            </div>
            <div class="dashboard-card">
                <div class="dashboard-card-title">üîÑ Monthly Recurring</div>
                <div class="dashboard-card-value" id="monthlyRecurringValue">--</div>
                <div class="dashboard-card-subtitle">Fixed expenses</div>
            </div>
        </div>

        <!-- Budget vs Actual Section -->
        <div class="budget-section" id="budgetSection">
            <h2 class="category-header">üéØ Budget vs Actual (Current Month)</h2>
            <div id="budgetContainer">
                <!-- Budget items populated by JavaScript -->
            </div>
        </div>

        <!-- Goals Section -->
        <div class="charts-section" id="goalsSection">
            <h2 class="category-header">üéØ Financial Goals</h2>
            <div class="charts-grid">
                <div class="chart-container">
                    <div class="chart-title">Emergency Fund Progress</div>
                    <canvas id="emergencyFundChart"></canvas>
                </div>
                <div class="chart-container">
                    <div class="chart-title">Credit Card Payoff Scenarios</div>
                    <canvas id="creditCardPayoffChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Financial Charts Section -->
        <div class="charts-section" id="chartsSection">
            <h2 class="category-header">üìä Spending Trends (6 Months)</h2>
            <div class="charts-grid">
                <div class="chart-container">
                    <div class="chart-title">Amazon Spending</div>
                    <canvas id="amazonTrendChart"></canvas>
                </div>
                <div class="chart-container">
                    <div class="chart-title">Dining & Drinks</div>
                    <canvas id="diningTrendChart"></canvas>
                </div>
                <div class="chart-container">
                    <div class="chart-title">Groceries</div>
                    <canvas id="groceriesTrendChart"></canvas>
                </div>
                <div class="chart-container">
                    <div class="chart-title">Shopping</div>
                    <canvas id="shoppingTrendChart"></canvas>
                </div>
            </div>
        </div>

        <div id="categoriesContainer">
            <!-- Categories populated by JavaScript -->
        </div>
    </div>

    <!-- Panel Overlay -->
    <div class="panel-overlay" id="panelOverlay" onclick="closePanel()"></div>

    <!-- Sliding Panel -->
    <div class="sliding-panel" id="slidingPanel">
        <div class="panel-header">
            <div class="panel-title" id="panelTitle"></div>
            <button class="close-btn" onclick="closePanel()">‚úï Close</button>
        </div>
        <div class="panel-content markdown-content" id="panelContent">
            <!-- Content rendered here -->
        </div>
    </div>

    <script>
        // EMBEDDED CONTENT
        const embeddedContent = {
    "Other Financial Documents::Financial Health Score": {
        "type": "markdown",
        "content": "# FINANCIAL HEALTH SCORE\n**Generated:** November 22, 2025 at 11:52 AM\n\n---\n\n## \ud83c\udfaf OVERALL SCORE\n\n### 65 / 75 (Grade: A)\n\n---\n\n## \ud83d\udcca COMPONENT SCORES\n\n### 1. Emergency Fund: 25.0 / 25\n**Status:** \u2705 Excellent\n- Coverage: 8.4 months of expenses\n- Target: 6 months\n\n### 2. Debt Management: 15.0 / 25\n**Status:** \ud83d\udfe2 Good\n- Total Debt: $265,500\n\n### 3. Cash Flow: 25.0 / 25\n**Status:** \u2705 Excellent\n- Monthly Surplus: $2,725\n- Surplus Rate: 36.3%\n\n---\n\n## \ud83d\udcb0 FINANCIAL SNAPSHOT\n\n- **Liquid Cash:** $40,000\n- **Total Debt:** $265,500\n- **Monthly Recurring:** $2,341\n\n---\n\n**Generated by:** calculate_health_score.py\n**Data from:** financial_config.json, budget.json\n"
    },
    "Other Financial Documents::Readme": {
        "type": "markdown",
        "content": "# Monthly Financial Snapshots\n\nThis folder stores archived copies of your financial state month-by-month.\n\n## \ud83d\udcf8 What Are Snapshots?\n\nSnapshots are point-in-time captures of your:\n- Account balances\n- Debt balances\n- Budget allocations\n- Financial goals progress\n- Transaction summaries\n\n## \ud83d\uddc2\ufe0f Folder Structure\n\n```\nsnapshots/\n\u251c\u2500\u2500 2024-11/\n\u2502   \u251c\u2500\u2500 financial_config.json\n\u2502   \u251c\u2500\u2500 budget.json\n\u2502   \u251c\u2500\u2500 financial_goals.json\n\u2502   \u251c\u2500\u2500 dashboard_data.json\n\u2502   \u2514\u2500\u2500 monthly_summary.md\n\u251c\u2500\u2500 2024-12/\n\u2502   \u2514\u2500\u2500 ...\n\u2514\u2500\u2500 2025-01/\n    \u2514\u2500\u2500 ...\n```\n\n## \ud83d\udcc5 How to Create a Snapshot\n\nRun the snapshot script at the end of each month:\n\n```bash\npython3 scripts/save_monthly_snapshot.py\n```\n\nThis will:\n1. Create a folder for the current month (YYYY-MM)\n2. Copy all current JSON configuration files\n3. Generate a monthly summary report\n4. Archive the data for historical tracking\n\n## \ud83d\udcc8 Why Take Snapshots?\n\n- **Track progress** over time\n- **Visualize trends** in spending, debt, and savings\n- **Historical reference** for tax season\n- **Audit trail** of financial decisions\n- **Monthly comparison** year-over-year\n\n## \ud83d\udd0d Viewing Snapshot Data\n\nYou can manually compare snapshots or use analysis scripts:\n\n```bash\n# Compare this month vs last month\npython3 scripts/compare_snapshots.py 2024-11 2024-10\n\n# View trend analysis\npython3 scripts/trend_analysis.py\n```\n\n---\n\n**Tip:** Take snapshots on the same day each month (e.g., the 1st) for consistent comparisons.\n"
    },
    "Analysis & Insights::Scenario Analysis": {
        "type": "markdown",
        "content": "# FINANCIAL SCENARIO ANALYSIS (TEMPLATE)\n**Generated:** November 22, 2025 at 11:52 AM\n\n\u26a0\ufe0f  **TEMPLATE FILE** - Update values in scenario_calculator.py before using\n\n---\n\n## Scenario 1: Extra Income Scenario\n- Monthly surplus: $2,500\n- Annual impact: $30,000\n\n## Scenario 2: Job Loss Emergency\n- Monthly deficit: $-4,000\n- Months covered: 3.8\n\n---\n\n**To customize:** Edit scenario_calculator.py with your personal values\n"
    },
    "Analysis & Insights::Transaction Analysis Report": {
        "type": "markdown",
        "content": "# TRANSACTION ANALYSIS REPORT\n**Generated:** November 22, 2025 at 11:52 AM\n**Data Source:** AllTransactions.csv\n**Period:** November 2024 - November 2024\n**Months Analyzed:** 1\n**Total Transactions:** 8\n\n---\n\n## \ud83d\udcca EXECUTIVE SUMMARY\n\n### Total Spending by Period\n\n**Overall:**\n- Total transactions: 8\n- Period: 1 months\n- Average per month: $7,461.48\n\n---\n\n## \ud83d\udcb3 TOP SPENDING CATEGORIES\n\n### Top 15 Categories\n\n| Rank | Category | Total Spent | Transactions | Avg per Transaction |\n|------|----------|-------------|--------------|-------------------|\n| 1 | **Income** | $7,000.00 | 2 | $3500.00 |\n| 2 | **Groceries** | $125.50 | 1 | $125.50 |\n| 3 | **Bills & Utilities** | $120.00 | 1 | $120.00 |\n| 4 | **Shopping** | $89.99 | 1 | $89.99 |\n| 5 | **Dining & Drinks** | $65.00 | 1 | $65.00 |\n| 6 | **Auto & Transport** | $45.00 | 1 | $45.00 |\n| 7 | **Entertainment & Rec.** | $15.99 | 1 | $15.99 |\n\n\n---\n\n## \ud83c\udfea TOP MERCHANTS\n\n### Top 20 Merchants by Total Spending\n\n| Rank | Merchant | Total Spent | Transactions |\n|------|----------|-------------|--------------|\n| 1 | Salary Deposit | $7,000.00 | 2 |\n| 2 | Grocery Store | $125.50 | 1 |\n| 3 | Electric Company | $120.00 | 1 |\n| 4 | Online Shopping | $89.99 | 1 |\n| 5 | Restaurant | $65.00 | 1 |\n| 6 | Gas Station | $45.00 | 1 |\n| 7 | Streaming Service | $15.99 | 1 |\n\n\n---\n\n## \ud83d\udcc8 MONTHLY SPENDING TRENDS\n\n### Last 12 Months (or available data)\n\n| Month | Total Spending | Change from Previous |\n|-------|---------------|---------------------|\n| 2024-11 | $7,461.48 | - |\n\n\n---\n\n## \ud83d\udea8 WASTE IDENTIFICATION\n\n### Potential Waste by Category\n\n| Category | Total | Monthly Average | % of Total Spending |\n|----------|-------|-----------------|---------------------|\n| **Dining** | $65.00 | $65.00 | 0.9% |\n| **Subscription** | $15.99 | $15.99 | 0.2% |\n\n\n### Waste Analysis Details\n\n**Amazon Spending:**\n- Total: $0.00\n- Monthly Average: $0.00\n- Recommendation: Target $200/month (84% reduction if current >$1,000/mo)\n\n**Dining Out:**\n- Total: $65.00\n- Monthly Average: $65.00\n- Recommendation: Target $200/month (80% reduction if current >$1,000/mo)\n\n**Fast Food:**\n- Total: $0.00\n- Monthly Average: $0.00\n- Recommendation: Eliminate (pack lunches, meal prep)\n\n**Total Identified Waste:** $80.99\n**Monthly Waste Average:** $80.99\n\n---\n\n## \ud83d\udca1 INSIGHTS & RECOMMENDATIONS\n\n### Spending Patterns\n\n**High Spending Categories:**\n1. **Income**: $7,000.00/month average\n2. **Groceries**: $125.50/month average\n3. **Bills & Utilities**: $120.00/month average\n\n\n**Opportunities for Savings:**\n\n1. **Reduce Discretionary Spending**\n   - Current waste: $80.99/month\n   - Target: $450/month total discretionary\n   - Potential savings: $-369.01/month\n\n2. **Eliminate Fast Food**\n   - Current: $0.00/month\n   - Target: $0/month\n   - Savings: $0.00/month\n\n3. **Control Amazon Spending**\n   - Current: $0.00/month\n   - Target: $200/month\n   - Savings: $0.00/month\n\n---\n\n## \ud83c\udfaf ACTION ITEMS\n\n### Immediate Actions\n\n- [ ] Review all Amazon purchases for necessities vs wants\n- [ ] Delete food delivery apps\n- [ ] Implement 30-day rule for all purchases >$25\n- [ ] Set up spending alerts in Rocket Money\n- [ ] Cancel unused subscriptions\n\n### Monthly Habits\n\n- [ ] Track every transaction immediately\n- [ ] Weekly budget review (Sundays)\n- [ ] Meal planning to avoid dining out\n- [ ] Pack lunch 5 days/week\n\n### Behavior Changes\n\n- **Stop:** Impulse purchases, convenience dining, Amazon browsing\n- **Start:** Meal prep, 30-day rule, cash-only for discretionary\n- **Continue:** Tracking all expenses, monthly reviews\n\n---\n\n## \ud83d\udcca DATA QUALITY NOTES\n\n**Transaction Coverage:**\n- Transactions analyzed: 8\n- Date range: 1 months\n- Average transactions per month: 8\n\n**Limitations:**\n- Analysis based on categorization in CSV\n- Some merchants may be miscategorized\n- Cash transactions may not be included\n- Shared expenses may not be split\n\n---\n\n## \ud83d\udd17 RELATED DOCUMENTS\n\n- **[SPENDING_ANALYSIS.md](SPENDING_ANALYSIS.md)** - Detailed waste analysis\n- **[DASHBOARD.md](DASHBOARD.md)** - Real-time metrics\n- **[BUDGET_GUIDELINES.md](BUDGET_GUIDELINES.md)** - Budget targets\n- **[MONTHLY_REVIEW_TEMPLATE.md](MONTHLY_REVIEW_TEMPLATE.md)** - Monthly tracking\n\n---\n\n**Next Steps:**\n1. Review this report with family\n2. Identify specific areas to cut\n3. Update budget in Rocket Money\n4. Set up automatic alerts\n5. Re-run this analysis monthly to track progress\n\n---\n\n**Generated by:** analyze_transactions.py\n**Last Updated:** 2025-11-22 11:52:12\n**Data File:** AllTransactions.csv\n"
    }
};

const EMBEDDED_DASHBOARD_DATA = {"generated_at": "2025-11-22T11:52:12.502047", "snapshot": {"liquid_cash": 40000.0, "total_debt": 265500.0, "net_worth": -225500.0, "monthly_recurring": 2340.99}, "trends": {"trends": {}, "top_merchants": [], "problem_categories": {}}, "budget_vs_actual": {"categories": {"Auto & Transport": {"budget": 400, "actual": 0, "remaining": 400, "percent": 0.0, "over_budget": false}, "Dining & Drinks": {"budget": 300, "actual": 0, "remaining": 300, "percent": 0.0, "over_budget": false}, "Entertainment & Rec.": {"budget": 150, "actual": 0, "remaining": 150, "percent": 0.0, "over_budget": false}, "Groceries": {"budget": 600, "actual": 0, "remaining": 600, "percent": 0.0, "over_budget": false}, "Home & Garden": {"budget": 100, "actual": 0, "remaining": 100, "percent": 0.0, "over_budget": false}, "Loan Payment": {"budget": 2000, "actual": 0, "remaining": 2000, "percent": 0.0, "over_budget": false}, "Medical": {"budget": 200, "actual": 0, "remaining": 200, "percent": 0.0, "over_budget": false}, "Personal Care": {"budget": 75, "actual": 0, "remaining": 75, "percent": 0.0, "over_budget": false}, "Pets": {"budget": 100, "actual": 0, "remaining": 100, "percent": 0.0, "over_budget": false}, "Shopping": {"budget": 200, "actual": 0, "remaining": 200, "percent": 0.0, "over_budget": false}, "Software & Tech": {"budget": 50, "actual": 0, "remaining": 50, "percent": 0.0, "over_budget": false}, "Everything Else": {"budget": 100, "actual": 0, "remaining": 100, "percent": 0.0, "over_budget": false}}, "over_budget_items": [], "total_budgeted": 4275, "total_spent": 0, "total_remaining": 4275, "days_in_month": 22, "days_remaining": 8}, "credit_card_payoff": {"total_balance": 500.0, "cards": [{"name": "Credit Card 1", "balance": 500.0, "apr": 18.99, "min_payment": 25, "months_to_payoff": 25, "total_interest": 105.93}], "current_payment": 25, "scenarios": {"$200/mo": {"monthly_payment": 200, "months": 3, "years": 0.2, "total_interest": 14.57, "total_paid": 514.57}, "$500/mo": {"monthly_payment": 500, "months": 2, "years": 0.2, "total_interest": 8.04, "total_paid": 508.04}, "$1000/mo": {"monthly_payment": 1000, "months": 1, "years": 0.1, "total_interest": 7.91, "total_paid": 507.91}, "$1500/mo": {"monthly_payment": 1500, "months": 1, "years": 0.1, "total_interest": 7.91, "total_paid": 507.91}}, "recommendation": {"method": "avalanche", "description": "Pay highest APR first", "target_payment": 500, "payoff_months": 2}}, "emergency_fund": {"current_balance": 40000.0, "monthly_expenses": 2340.99, "months_covered": 17.09, "days_covered": 513.0, "targets": {"three_months": 7022.97, "six_months": 14045.94}, "progress": {"to_3_months": {"percent": 569.6, "remaining": 0}, "to_6_months": {"percent": 284.8, "remaining": 0}}, "status": "excellent", "message": "\u2705 Excellent - You have 6+ months covered"}, "anomalies": {"category_anomalies": [], "large_transactions": [], "anomaly_count": 0}, "alerts": [], "config": {"recurring_expenses": {"mortgages_and_loans": {"primary_mortgage": {"name": "Primary Mortgage", "amount": 1500.0, "category": "Housing", "frequency": "monthly"}, "auto_loan": {"name": "Auto Loan", "amount": 350.0, "category": "Auto & Transport", "frequency": "monthly"}}, "subscriptions": {"streaming_service": {"name": "Streaming Service", "amount": 15.99, "category": "Entertainment & Rec.", "frequency": "monthly"}, "mobile_phone": {"name": "Mobile Phone", "amount": 80.0, "category": "Bills & Utilities", "frequency": "monthly"}, "insurance": {"name": "Life Insurance", "amount": 50.0, "category": "Insurance", "frequency": "monthly"}}, "utilities": {"natural_gas": {"name": "Natural Gas", "amount": 75.0, "category": "Bills & Utilities", "frequency": "monthly", "variable": true}, "electricity": {"name": "Electricity", "amount": 120.0, "category": "Bills & Utilities", "frequency": "monthly", "variable": true}, "car_insurance": {"name": "Car Insurance", "amount": 150.0, "category": "Insurance", "frequency": "monthly"}}}, "debt_balances": {"mortgages": {"primary_home": {"name": "Primary Home", "balance": 250000.0, "interest_rate": 3.5, "type": "mortgage", "property": "Primary Residence"}}, "auto": {"car_loan": {"name": "Car Loan", "balance": 15000.0, "interest_rate": 4.5, "type": "auto_loan"}}, "personal": {"personal_loan": {"name": "Personal Loan", "balance": 0.0, "interest_rate": 0.0, "type": "personal_loan"}}}, "credit_cards": {"credit_card_1": {"name": "Credit Card 1", "balance": 500.0, "limit": 5000, "apr": 18.99}, "credit_card_2": {"name": "Credit Card 2", "balance": 0.0, "limit": 10000, "apr": 15.99}}, "cash_accounts": {"checking": {"name": "Checking Account", "balance": 5000.0, "type": "checking", "liquid": true}, "savings": {"name": "Savings Account", "balance": 10000.0, "type": "savings", "liquid": true}, "brokerage": {"name": "Brokerage Account", "balance": 25000.0, "type": "brokerage", "liquid": true}}}};


        // DOCUMENTATION STRUCTURE
        const docsStructure = {
        "Other Financial Documents": [
                {
                        "name": "Financial Health Score",
                        "file": "Archive/reports/FINANCIAL_HEALTH_SCORE.md",
                        "icon": "\ud83d\udcc4",
                        "type": "markdown"
                },
                {
                        "name": "Readme",
                        "file": "Archive/raw/README.md",
                        "icon": "\ud83d\udcc4",
                        "type": "markdown"
                },
                {
                        "name": "Readme",
                        "file": "Archive/reports/README.md",
                        "icon": "\ud83d\udcc4",
                        "type": "markdown"
                },
                {
                        "name": "Readme",
                        "file": "Archive/snapshots/README.md",
                        "icon": "\ud83d\udcc4",
                        "type": "markdown"
                }
        ],
        "Analysis & Insights": [
                {
                        "name": "Scenario Analysis",
                        "file": "Archive/reports/SCENARIO_ANALYSIS.md",
                        "icon": "\ud83d\udcc8",
                        "type": "markdown"
                },
                {
                        "name": "Transaction Analysis Report",
                        "file": "Archive/reports/TRANSACTION_ANALYSIS_REPORT.md",
                        "icon": "\ud83d\udcc8",
                        "type": "markdown"
                }
        ]
};

        // Render categories and cards
        function renderDocuments() {
            const container = document.getElementById('categoriesContainer');
            let html = '';

            for (const [category, items] of Object.entries(docsStructure)) {
                const categoryInfo = getCategoryInfo(category);

                html += `
                    <div class="category-section">
                        <h2 class="category-header">${categoryInfo.icon} ${category}</h2>
                        <p class="category-description">${categoryInfo.description}</p>
                        <div class="docs-grid">
                `;

                items.forEach(item => {
                    const key = `${category}::${item.name}`;
                    const badge = item.badge ? `<span class="badge badge-${item.badge}">${item.badge.toUpperCase()}</span>` : '';

                    html += `
                        <div class="doc-card" onclick="openPanel('${key}')">
                            <div class="doc-header">
                                <div class="doc-icon">${item.icon}</div>
                                <div>
                                    <div class="doc-title">${item.name} ${badge}</div>
                                </div>
                            </div>
                            <div class="doc-category-badge">${category}</div>
                        </div>
                    `;
                });

                html += `
                        </div>
                    </div>
                `;
            }

            container.innerHTML = html;
        }

        function getCategoryInfo(category) {
            const categoryMap = {
                'Current Status & Planning': {
                    icon: 'üìä',
                    description: 'Current financial position, action plans, budget guidelines, and key dates'
                },
                'Analysis & Insights': {
                    icon: 'üìà',
                    description: 'Spending patterns, property analysis, scenario modeling, and financial trends'
                },
                'Reports & Reviews': {
                    icon: 'üìù',
                    description: 'Monthly reviews, financial health scores, and budget tracking'
                },
                'Tax Documents': {
                    icon: 'üìã',
                    description: 'W2s, 1099s, 1098s, and tax returns'
                },
                'Transaction Data': {
                    icon: 'üí≥',
                    description: 'Transaction history and spending data'
                },
                'Property Documents': {
                    icon: 'üè†',
                    description: 'Property-related documents and receipts'
                },
                'Budget Screenshots': {
                    icon: 'üì∏',
                    description: 'Budget screenshots and financial snapshots'
                },
                'Other Financial Documents': {
                    icon: 'üìÑ',
                    description: 'Other financial documents and spreadsheets'
                }
            };

            return categoryMap[category] || { icon: 'üìÑ', description: 'Financial documents' };
        }

        function openPanel(key) {
            const doc = embeddedContent[key];
            if (!doc) {
                alert('Document content not found');
                return;
            }

            const title = key.split('::')[1];
            document.getElementById('panelTitle').textContent = title;

            renderContent('panelContent', doc);

            document.getElementById('panelOverlay').classList.add('visible');
            document.getElementById('slidingPanel').classList.add('visible');
            document.body.style.overflow = 'hidden';
        }

        function closePanel() {
            document.getElementById('panelOverlay').classList.remove('visible');
            document.getElementById('slidingPanel').classList.remove('visible');
            document.body.style.overflow = 'auto';
        }

        function renderContent(targetId, doc) {
            const target = document.getElementById(targetId);

            if (doc.type === 'markdown') {
                try {
                    const html = marked.parse(doc.content);
                    target.innerHTML = html;
                } catch (error) {
                    console.error('Markdown render error:', error);
                    target.innerHTML = `<p style="color: #D32F2F;">Error rendering markdown: ${error.message}</p>`;
                }
            } else if (doc.type === 'image') {
                target.innerHTML = `<img src="${doc.path}" alt="Image" style="max-width: 100%; border-radius: 10px;">`;
            } else {
                // PDF, CSV, XLSX - provide download link
                const fileType = doc.type.toUpperCase();
                target.innerHTML = `
                    <div style="text-align: center; padding: 50px;">
                        <p style="font-size: 3em; margin-bottom: 20px;">üìÑ</p>
                        <h2 style="color: var(--primary-light); margin-bottom: 20px;">${fileType} Document</h2>
                        <p style="margin-bottom: 30px; color: var(--text-secondary);">
                            This is a ${fileType} file. Click below to open or download.
                        </p>
                        <a href="${doc.path}" class="file-link" download>
                            üì• Download ${fileType}
                        </a>
                        <br><br>
                        <a href="${doc.path}" class="file-link" target="_blank">
                            üîó Open in New Tab
                        </a>
                    </div>
                `;
            }

            target.scrollTop = 0;
        }

        // Search functionality
        function performSearch(query) {
            const resultsDiv = document.getElementById('searchResults');

            if (!query || query.trim().length < 2) {
                resultsDiv.classList.remove('visible');
                resultsDiv.innerHTML = '';
                return;
            }

            const searchTerm = query.toLowerCase();
            const results = [];

            // Search through all embedded markdown content
            for (const [key, doc] of Object.entries(embeddedContent)) {
                if (doc.type === 'markdown' && doc.content) {
                    const content = doc.content.toLowerCase();
                    const title = key.split('::')[1];

                    if (title.toLowerCase().includes(searchTerm) || content.includes(searchTerm)) {
                        // Find context around the match
                        const index = content.indexOf(searchTerm);
                        const start = Math.max(0, index - 100);
                        const end = Math.min(content.length, index + 100);
                        const context = doc.content.substring(start, end);

                        results.push({
                            key: key,
                            title: title,
                            context: context,
                            category: key.split('::')[0]
                        });
                    }
                }
            }

            if (results.length > 0) {
                let html = `<h3 style="color: var(--primary-light); margin-bottom: 10px;">Found ${results.length} result${results.length > 1 ? 's' : ''}</h3>`;

                results.slice(0, 10).forEach(result => {
                    html += `
                        <div style="padding: 10px; margin: 10px 0; background: rgba(0,0,0,0.3); border-radius: 8px; cursor: pointer;"
                             onclick="openPanel('${result.key}'); document.getElementById('searchBox').value = '';">
                            <div style="color: var(--primary-light); font-weight: bold; margin-bottom: 5px;">
                                ${result.title}
                            </div>
                            <div style="font-size: 0.85em; color: var(--text-secondary);">
                                ${result.category}
                            </div>
                        </div>
                    `;
                });

                if (results.length > 10) {
                    html += `<div style="text-align: center; padding: 10px; color: var(--text-secondary);">
                        ... and ${results.length - 10} more results
                    </div>`;
                }

                resultsDiv.innerHTML = html;
                resultsDiv.classList.add('visible');
            } else {
                resultsDiv.innerHTML = '<p style="color: var(--text-secondary); padding: 10px;">No results found</p>';
                resultsDiv.classList.add('visible');
            }
        }

        // Load and render dashboard data (uses embedded data)
        function loadDashboardData() {
            try {
                if (typeof EMBEDDED_DASHBOARD_DATA !== 'undefined' && EMBEDDED_DASHBOARD_DATA) {
                    renderDashboard(EMBEDDED_DASHBOARD_DATA);
                } else {
                    console.warn('‚ö†Ô∏è  Dashboard data not embedded, showing placeholder');
                    showPlaceholderDashboard();
                }
            } catch (error) {
                console.error('Error loading dashboard data:', error);
                showPlaceholderDashboard();
            }
        }

        function renderDashboard(data) {
            renderAlerts(data.alerts);
            renderSnapshotCards(data.snapshot);
            renderBudgetProgress(data.budget_vs_actual);
            renderGoalCharts(data.emergency_fund, data.credit_card_payoff);
            initCharts(data.trends);
        }

        function showPlaceholderDashboard() {
            document.getElementById('liquidCashValue').textContent = 'No Data';
            document.getElementById('totalDebtValue').textContent = 'No Data';
            document.getElementById('netWorthValue').textContent = 'No Data';
            document.getElementById('monthlyRecurringValue').textContent = 'No Data';
            document.getElementById('budgetContainer').innerHTML = '<p style="color: var(--text-secondary);">Run build_all.py to generate dashboard data</p>';
            document.getElementById('chartsSection').style.display = 'none';
        }

        function renderAlerts(alerts) {
            const container = document.getElementById('alertsContainer');

            if (!alerts || alerts.length === 0) {
                container.style.display = 'none';
                return;
            }

            let html = '<div class="alerts-banner"><h2 class="category-header">‚ö†Ô∏è  Financial Alerts</h2>';

            alerts.forEach(alert => {
                const icon = alert.type === 'critical' ? 'üî¥' : '‚ö†Ô∏è';
                html += `
                    <div class="alert-item ${alert.type}">
                        <div class="alert-message">${icon} ${alert.message}</div>
                        <div class="alert-action">Action: ${alert.action}</div>
                    </div>
                `;
            });

            html += '</div>';
            container.innerHTML = html;
            container.style.display = 'block';
        }

        function renderSnapshotCards(snapshot) {
            document.getElementById('liquidCashValue').textContent =
                '$' + snapshot.liquid_cash.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});

            document.getElementById('totalDebtValue').textContent =
                '$' + snapshot.total_debt.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});

            const netWorthValue = document.getElementById('netWorthValue');
            const netWorth = snapshot.net_worth;
            netWorthValue.textContent =
                (netWorth < 0 ? '-$' : '$') + Math.abs(netWorth).toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
            netWorthValue.style.color = netWorth < 0 ? '#D32F2F' : '#00BCD4';

            document.getElementById('monthlyRecurringValue').textContent =
                '$' + snapshot.monthly_recurring.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
        }

        function renderBudgetProgress(budgetData) {
            const container = document.getElementById('budgetContainer');
            let html = '';

            // Sort by overage amount (over-budget items first)
            const categories = Object.entries(budgetData.categories).sort((a, b) => {
                if (a[1].over_budget && !b[1].over_budget) return -1;
                if (!a[1].over_budget && b[1].over_budget) return 1;
                return b[1].actual - a[1].actual;
            });

            categories.forEach(([category, data]) => {
                const percent = Math.min(data.percent, 100);
                const overBudget = data.over_budget ? 'over-budget' : '';
                const statusIcon = data.over_budget ? 'üî¥' : (percent > 80 ? '‚ö†Ô∏è' : '‚úÖ');

                html += `
                    <div class="budget-item">
                        <div class="budget-header">
                            <div class="budget-category">${statusIcon} ${category}</div>
                            <div class="budget-amounts">
                                $${data.actual.toLocaleString()} / $${data.budget.toLocaleString()}
                                <span style="color: ${data.over_budget ? '#D32F2F' : '#00BCD4'}; margin-left: 10px;">
                                    ${data.percent.toFixed(0)}%
                                </span>
                            </div>
                        </div>
                        <div class="budget-progress-bar">
                            <div class="budget-progress-fill ${overBudget}" style="width: ${percent}%">
                                ${data.over_budget ? 'Over by $' + data.overage?.toLocaleString() || Math.abs(data.remaining).toLocaleString() : ''}
                            </div>
                        </div>
                    </div>
                `;
            });

            // Add summary
            html += `
                <div style="margin-top: 30px; padding-top: 20px; border-top: 2px solid var(--primary-color);">
                    <div class="budget-header">
                        <div class="budget-category" style="font-size: 1.2em;">Total Monthly Budget</div>
                        <div class="budget-amounts" style="font-size: 1.1em;">
                            $${budgetData.total_spent.toLocaleString()} / $${budgetData.total_budgeted.toLocaleString()}
                        </div>
                    </div>
                    <div style="margin-top: 10px; color: var(--text-secondary); text-align: center;">
                        Day ${budgetData.days_in_month} of month ‚Ä¢ ${budgetData.days_remaining} days remaining
                    </div>
                </div>
            `;

            container.innerHTML = html;
        }

        function renderGoalCharts(emergencyFund, creditCardPayoff) {
            if (typeof Chart === 'undefined') {
                console.warn('‚ö†Ô∏è  Chart.js not loaded, skipping goal charts');
                document.getElementById('goalsSection').style.display = 'none';
                return;
            }

            renderEmergencyFundChart(emergencyFund);
            renderCreditCardPayoffChart(creditCardPayoff);
        }

        function renderEmergencyFundChart(data) {
            if (!data) return;

            const ctx = document.getElementById('emergencyFundChart');
            const current = data.current_balance;
            const target3mo = data.targets.three_months;
            const target6mo = data.targets.six_months;

            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Current', '3-Month Gap', '6-Month Gap'],
                    datasets: [{
                        data: [
                            current,
                            Math.max(0, target3mo - current),
                            Math.max(0, target6mo - target3mo)
                        ],
                        backgroundColor: [
                            data.status === 'critical' ? '#D32F2F' :
                            data.status === 'fair' ? '#F57C00' :
                            data.status === 'good' ? '#00BCD4' : '#4CAF50',
                            'rgba(0, 188, 212, 0.3)',
                            'rgba(0, 188, 212, 0.1)'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: { display: true, position: 'bottom' },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': $' + context.parsed.toLocaleString();
                                }
                            }
                        },
                        title: {
                            display: true,
                            text: [
                                data.message,
                                `${data.days_covered} days covered (${data.months_covered.toFixed(1)} months)`,
                                `Goal: $${target6mo.toLocaleString()} (6 months)`
                            ],
                            color: '#00BCD4',
                            font: {
                                size: 12
                            }
                        }
                    }
                }
            });
        }

        function renderCreditCardPayoffChart(data) {
            if (!data || !data.scenarios) return;

            const ctx = document.getElementById('creditCardPayoffChart');

            // Extract scenario data
            const scenarios = Object.entries(data.scenarios);
            const labels = scenarios.map(([label, _]) => label);
            const months = scenarios.map(([_, scenario]) => scenario.months || 0);
            const totalInterest = scenarios.map(([_, scenario]) => scenario.total_interest);

            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Months to Payoff',
                        data: months,
                        backgroundColor: 'rgba(0, 188, 212, 0.7)',
                        borderColor: '#00BCD4',
                        borderWidth: 2,
                        yAxisID: 'y'
                    }, {
                        label: 'Total Interest Paid',
                        data: totalInterest,
                        backgroundColor: 'rgba(211, 47, 47, 0.7)',
                        borderColor: '#D32F2F',
                        borderWidth: 2,
                        yAxisID: 'y1'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: { display: true, position: 'bottom' },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    if (context.datasetIndex === 0) {
                                        const years = (context.parsed.y / 12).toFixed(1);
                                        return `Payoff: ${context.parsed.y} months (${years} years)`;
                                    } else {
                                        return `Interest: $${context.parsed.y.toLocaleString()}`;
                                    }
                                }
                            }
                        },
                        title: {
                            display: true,
                            text: [
                                `Current Balance: $${data.total_balance.toLocaleString()}`,
                                `Current Payment: $${data.current_payment}/mo`,
                                `Recommendation: $${data.recommendation.target_payment}/mo (${data.recommendation.method} method)`
                            ],
                            color: '#00BCD4',
                            font: {
                                size: 11
                            }
                        }
                    },
                    scales: {
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: {
                                display: true,
                                text: 'Months',
                                color: '#00BCD4'
                            },
                            ticks: {
                                color: '#00BCD4'
                            }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: 'Interest ($)',
                                color: '#D32F2F'
                            },
                            ticks: {
                                color: '#D32F2F',
                                callback: function(value) {
                                    return '$' + (value / 1000).toFixed(1) + 'k';
                                }
                            },
                            grid: {
                                drawOnChartArea: false
                            }
                        }
                    }
                }
            });
        }

        // Chart rendering functions
        function initCharts(trends) {
            if (typeof Chart === 'undefined') {
                console.warn('‚ö†Ô∏è  Chart.js not loaded, skipping charts');
                document.getElementById('chartsSection').style.display = 'none';
                return;
            }

            Chart.defaults.color = '#B0BEC5';
            Chart.defaults.borderColor = 'rgba(0, 188, 212, 0.3)';

            renderTrendChart('amazonTrendChart', trends.trends['Amazon'] || null, 'Amazon Spending', '#FF9800');
            renderTrendChart('diningTrendChart', trends.trends['Dining & Drinks'] || null, 'Dining & Drinks', '#E91E63');
            renderTrendChart('groceriesTrendChart', trends.trends['Groceries'] || null, 'Groceries', '#4CAF50');
            renderTrendChart('shoppingTrendChart', trends.trends['Shopping'] || null, 'Shopping', '#2196F3');
        }

        function renderTrendChart(canvasId, trendData, label, color) {
            const ctx = document.getElementById(canvasId);

            if (!trendData || !trendData.months || trendData.months.length === 0) {
                ctx.parentElement.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 50px;">No data available</p>';
                return;
            }

            // Format month labels (YYYY-MM to MMM YYYY)
            const monthLabels = trendData.months.map(m => {
                const [year, month] = m.split('-');
                const date = new Date(year, month - 1);
                return date.toLocaleDateString('en-US', { month: 'short', year: 'numeric' });
            });

            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: monthLabels,
                    datasets: [{
                        label: label,
                        data: trendData.amounts,
                        backgroundColor: color + '33',
                        borderColor: color,
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointRadius: 5,
                        pointHoverRadius: 8,
                        pointBackgroundColor: color,
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return label + ': $' + context.parsed.y.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
                                }
                            }
                        },
                        title: {
                            display: true,
                            text: `6-Month Total: $${trendData.total.toLocaleString()} (Avg: $${trendData.average.toLocaleString()}/mo)`,
                            color: color,
                            font: {
                                size: 13
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '$' + value.toLocaleString();
                                }
                            },
                            grid: {
                                color: 'rgba(0, 188, 212, 0.1)'
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(0, 188, 212, 0.1)'
                            }
                        }
                    }
                }
            });
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üí∞ Financial Hub loaded');
            console.log('üìä Categories:', Object.keys(docsStructure).length);
            console.log('üìÑ Documents:', Object.keys(embeddedContent).length);

            renderDocuments();
            loadDashboardData();

            if (typeof marked === 'undefined') {
                console.error('‚ùå marked.js failed to load');
            } else {
                console.log('‚úÖ marked.js loaded');
            }

            if (typeof Chart !== 'undefined') {
                console.log('‚úÖ Chart.js loaded');
            }
        });

        // Close panel on Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && document.getElementById('slidingPanel').classList.contains('visible')) {
                closePanel();
            }
        });
    </script>
</body>
</html>
